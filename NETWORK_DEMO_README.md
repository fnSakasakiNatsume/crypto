# TLS 网络通信演示说明

## 📋 概述

本项目现在支持**真实的网络通信**，可以在两台电脑之间演示完整的TLS握手过程。

## 🚀 快速开始

### 方式1：单机演示（同一台电脑，两个终端）

1. **编译项目**
   ```bash
   compile.bat
   ```

2. **打开第一个终端，运行服务器**
   ```bash
   run_server.bat
   ```
   服务器将监听在端口 8888

3. **打开第二个终端，运行客户端**
   ```bash
   run_client.bat
   ```
   客户端将连接到 localhost:8888

4. **观察握手过程**
   - 客户端和服务器会依次执行7个阶段的握手
   - 握手完成后，可以输入消息进行加密通信

### 方式2：两台电脑演示（网络通信）

1. **在服务器电脑上：**
   - 运行 `compile.bat` 编译项目
   - 运行 `run_server.bat` 启动服务器
   - 记录服务器的IP地址（如：192.168.1.100）

2. **在客户端电脑上：**
   - 修改 `TLSClient.java` 第12行：
     ```java
     private static final String SERVER_HOST = "192.168.1.100"; // 改为服务器IP
     ```
   - 运行 `compile.bat` 重新编译
   - 运行 `run_client.bat` 启动客户端

3. **确保网络连接：**
   - 两台电脑需要在同一网络
   - 防火墙允许端口 8888 的通信

## 📁 新增文件说明

### CryptoUtils.java
- **功能：** 密码学工具类，封装所有密码学操作
- **包含：**
  - RSA密钥交换（生成密钥对、加密/解密PMS）
  - 数字证书（CA签名、验证）
  - AES-GCM对称加密（加密/解密数据）
  - 会话密钥生成

### TLSServer.java
- **功能：** TLS服务器端程序
- **特性：**
  - 监听客户端连接（端口 8888）
  - 执行完整的TLS握手流程（7个阶段）
  - 支持多客户端连接（多线程）
  - 处理加密通信

### TLSClient.java
- **功能：** TLS客户端程序
- **特性：**
  - 连接到服务器
  - 执行完整的TLS握手流程（7个阶段）
  - 发送和接收加密消息
  - 交互式输入

## 🔄 TLS握手流程（7个阶段）

1. **Client Hello & Server Hello**
   - 协商TLS版本和加密算法
   - 交换随机数 R1 和 R2

2. **Server Certificate**
   - 服务器发送数字证书
   - 包含服务器公钥和CA签名

3. **Certificate Verification**
   - 客户端验证证书
   - 检查CA签名

4. **Key Exchange**
   - 客户端生成Pre-Master Secret (PMS)
   - 使用服务器公钥加密PMS
   - 服务器使用私钥解密PMS

5. **Session Key Generation**
   - 双方使用 R1 + R2 + PMS 生成会话密钥
   - 使用SHA-256算法

6. **Change Cipher Spec**
   - 双方切换到加密模式
   - 握手完成

7. **Encrypted Communication**
   - 使用AES-256-GCM加密通信
   - 双向加密数据传输

## 💡 演示要点

### 展示重点：
1. **网络通信：** 真实的Socket网络编程
2. **多线程：** 服务器支持多客户端连接
3. **完整握手：** 7个阶段的完整流程
4. **加密通信：** 实际的数据加密传输
5. **密码学封装：** 密码学细节封装在工具类中

### 演示技巧：
- 运行服务器后，可以看到"等待客户端连接..."
- 客户端连接后，双方会依次显示每个阶段的详细信息
- 握手完成后，可以在客户端输入消息，观察加密传输过程
- 可以打开多个客户端，展示服务器的多线程处理能力

## ⚠️ 注意事项

1. **端口占用：** 如果8888端口被占用，修改 `TLSServer.java` 中的 `PORT` 常量

2. **防火墙：** 两台电脑通信时，确保防火墙允许端口8888

3. **IP地址：** 客户端需要知道服务器的IP地址
   - Windows: `ipconfig` 查看IP
   - Linux/Mac: `ifconfig` 或 `ip addr`

4. **网络问题：** 如果连接失败，检查：
   - 服务器是否已启动
   - IP地址是否正确
   - 网络是否连通（ping测试）

## 🎯 展示建议

### 8分钟展示流程：

1. **项目概述（30秒）**
   - 介绍客户端-服务器架构
   - 说明网络通信功能

2. **系统架构（1分钟）**
   - 展示架构图
   - 说明两台电脑通信示意图

3. **握手流程演示（2.5分钟）**
   - 运行服务器和客户端
   - 展示7个阶段的握手过程
   - 实时显示握手消息

4. **密码学工具封装（1分钟）**
   - 介绍CryptoUtils工具类
   - 说明如何简化密码学细节

5. **加密通信演示（1.5分钟）**
   - 两台电脑发送加密消息
   - 展示数据加密/解密过程

6. **后端实现亮点（1分钟）**
   - Socket网络编程
   - 多线程处理
   - 错误处理

7. **总结（30秒）**

## 📝 代码贡献说明

- **CryptoUtils.java：** 封装所有密码学操作，简化使用
- **TLSServer.java：** 实现服务器端网络通信和握手流程
- **TLSClient.java：** 实现客户端网络通信和握手流程
- **原有模块：** 保留作为参考和单独演示使用
